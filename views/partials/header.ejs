<header class="bg-success text-white p-3 d-flex justify-content-between align-items-center">
    <div class="ms-3">
        <h3><span class="text-warning">P</span><span class="text-dark">assarinhar Hub</span></h3>
    </div>
    
    <nav class="me-3 d-flex align-items-center">
        <a href="/homepage" class="btn btn-light btn-sm me-2">Página Inicial</a>
        <a href="/cadastro-fazenda" class="btn btn-outline-light btn-sm me-3">Cadastrar Fazenda</a>
        
        <% if (typeof user !== 'undefined' && user) { %>
            <div class="dropdown">
                <button class="btn btn-dark text-white dropdown-toggle" type="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-user me-1"></i>
                    <%= user.nome %>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                    <li><h6 class="dropdown-header">Olá, <%= user.nome %>!</h6></li>
                    <li><small class="dropdown-item-text text-muted"><%= user.email %></small></li>
                    <li><hr class="dropdown-divider"></li>
                    <li>
                        <form action="/auth/logout" method="POST" class="d-inline">
                            <button type="submit" class="dropdown-item text-danger">
                                <i class="fas fa-sign-out-alt me-1"></i>
                                Sair
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
        <% } else { %>
            <div class="dropdown">
                <button class="btn btn-dark text-white dropdown-toggle" type="button" id="loginDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-user me-1"></i>
                    Entrar
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="loginDropdown">
                    <li>
                        <a class="dropdown-item" href="/users/login">
                            <i class="fas fa-sign-in-alt me-1"></i>
                            Fazer Login
                        </a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="/users/register">
                            <i class="fas fa-user-plus me-1"></i>
                            Cadastrar-se
                        </a>
                    </li>
                </ul>
            </div>
        <% } %>
    </nav>
</header>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dropdown = document.querySelector('.dropdown-toggle');
        const dropdownMenu = document.querySelector('.dropdown-menu');
        
        if (dropdown && dropdownMenu) {
            dropdown.addEventListener('click', function(e) {
                e.preventDefault();
                dropdownMenu.classList.toggle('show');
            });
            
            document.addEventListener('click', function(e) {
                if (!dropdown.contains(e.target)) {
                    dropdownMenu.classList.remove('show');
                }
            });
        }
    });
</script>